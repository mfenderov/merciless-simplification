<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Core Methodology | Merciless Simplification</title>
<meta name="keywords" content="">
<meta name="description" content="&ldquo;Merciless Simplification&rdquo; Methodology

Core Principle: Keep what provides value, eliminate what doesn&rsquo;t. Every line of code, every test, every piece of documentation must justify its existence.
Philosophy
The Problem
Most codebases accumulate complexity over time:

Over-engineered tests that test framework behavior instead of business logic
Redundant documentation that repeats the same concepts multiple ways
Complex abstractions that add layers without adding value
Benchmark overkill that measures edge cases instead of real performance
API bloat with convenience functions that provide minimal benefit

The Solution: Merciless Simplification
Systematic elimination of complexity using a proven filter and micro-ticket approach.">
<meta name="author" content="Mark Fenderov">
<link rel="canonical" href="http://localhost:1313/merciless_simplification_methodology/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%E2%9A%94%EF%B8%8F">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%E2%9A%94%EF%B8%8F">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%E2%9A%94%EF%B8%8F">
<link rel="apple-touch-icon" href="http://localhost:1313/%E2%9A%94%EF%B8%8F">
<link rel="mask-icon" href="http://localhost:1313/%E2%9A%94%EF%B8%8F">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/merciless_simplification_methodology/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Merciless Simplification (Alt + H)">Merciless Simplification</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/ai_agent_usage_guide/" title="AI Guide">
                    <span>AI Guide</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/simplification_patterns/" title="Patterns">
                    <span>Patterns</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/simplification_results/" title="Case Study">
                    <span>Case Study</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/mfenderov/merciless-simplification" title="GitHub">
                    <span>GitHub</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a></div>
    <h1 class="post-title entry-hint-parent">
      Core Methodology
    </h1>
    <div class="post-meta">5 min&nbsp;·&nbsp;Mark Fenderov

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#philosophy">Philosophy</a>
      <ul>
        <li><a href="#the-problem">The Problem</a></li>
        <li><a href="#the-solution-merciless-simplification">The Solution: Merciless Simplification</a></li>
      </ul>
    </li>
    <li><a href="#core-principles">Core Principles</a>
      <ul>
        <li><a href="#1-the-simplification-filter">1. The Simplification Filter</a></li>
        <li><a href="#2-micro-ticket-methodology">2. Micro-Ticket Methodology</a></li>
        <li><a href="#3-quality-gates">3. Quality Gates</a></li>
      </ul>
    </li>
    <li><a href="#the-process">The Process</a>
      <ul>
        <li><a href="#phase-1-project-analysis-30-45-minutes">Phase 1: Project Analysis (30-45 minutes)</a></li>
        <li><a href="#phase-2-micro-ticket-creation-15-30-minutes">Phase 2: Micro-Ticket Creation (15-30 minutes)</a></li>
        <li><a href="#phase-3-systematic-execution-variable">Phase 3: Systematic Execution (Variable)</a></li>
        <li><a href="#phase-4-impact-measurement-15-minutes">Phase 4: Impact Measurement (15 minutes)</a></li>
      </ul>
    </li>
    <li><a href="#success-patterns">Success Patterns</a>
      <ul>
        <li><a href="#test-simplification">Test Simplification</a></li>
        <li><a href="#documentation-streamlining">Documentation Streamlining</a></li>
        <li><a href="#api-surface-optimization">API Surface Optimization</a></li>
      </ul>
    </li>
    <li><a href="#risk-mitigation">Risk Mitigation</a>
      <ul>
        <li><a href="#git-workflow">Git Workflow</a></li>
        <li><a href="#testing-strategy">Testing Strategy</a></li>
        <li><a href="#quality-checkpoints">Quality Checkpoints</a></li>
      </ul>
    </li>
    <li><a href="#measuring-success">Measuring Success</a>
      <ul>
        <li><a href="#quantitative-metrics">Quantitative Metrics</a></li>
        <li><a href="#qualitative-improvements">Qualitative Improvements</a></li>
      </ul>
    </li>
    <li><a href="#when-not-to-apply">When NOT to Apply</a></li>
    <li><a href="#expected-results">Expected Results</a></li>
    <li><a href="#case-study-konfig-library">Case Study: konfig Library</a></li>
    <li><a href="#getting-started">Getting Started</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="merciless-simplification-methodology">&ldquo;Merciless Simplification&rdquo; Methodology<a hidden class="anchor" aria-hidden="true" href="#merciless-simplification-methodology">#</a></h1>
<blockquote>
<p><strong>Core Principle</strong>: Keep what provides value, eliminate what doesn&rsquo;t. Every line of code, every test, every piece of documentation must justify its existence.</p></blockquote>
<h2 id="philosophy">Philosophy<a hidden class="anchor" aria-hidden="true" href="#philosophy">#</a></h2>
<h3 id="the-problem">The Problem<a hidden class="anchor" aria-hidden="true" href="#the-problem">#</a></h3>
<p>Most codebases accumulate complexity over time:</p>
<ul>
<li><strong>Over-engineered tests</strong> that test framework behavior instead of business logic</li>
<li><strong>Redundant documentation</strong> that repeats the same concepts multiple ways</li>
<li><strong>Complex abstractions</strong> that add layers without adding value</li>
<li><strong>Benchmark overkill</strong> that measures edge cases instead of real performance</li>
<li><strong>API bloat</strong> with convenience functions that provide minimal benefit</li>
</ul>
<h3 id="the-solution-merciless-simplification">The Solution: Merciless Simplification<a hidden class="anchor" aria-hidden="true" href="#the-solution-merciless-simplification">#</a></h3>
<p>Systematic elimination of complexity using a proven filter and micro-ticket approach.</p>
<p><strong>Results</strong>: 20-40% complexity reduction while preserving 100% functionality and improving maintainability.</p>
<h2 id="core-principles">Core Principles<a hidden class="anchor" aria-hidden="true" href="#core-principles">#</a></h2>
<h3 id="1-the-simplification-filter">1. The Simplification Filter<a hidden class="anchor" aria-hidden="true" href="#1-the-simplification-filter">#</a></h3>
<p>Every component must pass this test:</p>
<p><strong>KEEP</strong> ✅ if it:</p>
<ul>
<li>Solves real user problems developers encounter weekly</li>
<li>Catches actual bugs that occur in production</li>
<li>Provides essential performance insights</li>
<li>Offers clear semantic value beyond thin wrappers</li>
<li>Enables future extensibility with minimal maintenance cost</li>
</ul>
<p><strong>ELIMINATE</strong> ❌ if it:</p>
<ul>
<li>Tests framework behavior instead of business logic</li>
<li>Repeats information already documented elsewhere</li>
<li>Abstracts simple operations without adding value</li>
<li>Measures edge cases that don&rsquo;t occur in real usage</li>
<li>Adds cognitive overhead without corresponding benefit</li>
</ul>
<h3 id="2-micro-ticket-methodology">2. Micro-Ticket Methodology<a hidden class="anchor" aria-hidden="true" href="#2-micro-ticket-methodology">#</a></h3>
<p>Break simplification into <strong>5-15 minute focused tasks</strong>:</p>
<ul>
<li><strong>Lower risk</strong>: Easy to revert small changes</li>
<li><strong>Better focus</strong>: Single responsibility per ticket</li>
<li><strong>Immediate feedback</strong>: Test and verify each change</li>
<li><strong>Sustainable pace</strong>: Fits into any development session</li>
<li><strong>Clear progress</strong>: Tangible completion of many small improvements</li>
</ul>
<h3 id="3-quality-gates">3. Quality Gates<a hidden class="anchor" aria-hidden="true" href="#3-quality-gates">#</a></h3>
<p>Every change must:</p>
<ul>
<li>Preserve 100% functionality (all tests pass)</li>
<li>Maintain or improve performance</li>
<li>Keep or enhance user experience</li>
<li>Reduce cognitive complexity</li>
<li>Be immediately reversible</li>
</ul>
<h2 id="the-process">The Process<a hidden class="anchor" aria-hidden="true" href="#the-process">#</a></h2>
<h3 id="phase-1-project-analysis-30-45-minutes">Phase 1: Project Analysis (30-45 minutes)<a hidden class="anchor" aria-hidden="true" href="#phase-1-project-analysis-30-45-minutes">#</a></h3>
<ol>
<li>
<p><strong>Inventory Assessment</strong></p>
<ul>
<li>Count test files, documentation files, source files</li>
<li>Measure lines of code, complexity metrics</li>
<li>Identify major component categories</li>
</ul>
</li>
<li>
<p><strong>Complexity Hotspot Identification</strong></p>
<ul>
<li>Find over-engineered test scenarios</li>
<li>Locate redundant documentation</li>
<li>Identify bloated API surfaces</li>
<li>Spot unnecessary abstractions</li>
</ul>
</li>
<li>
<p><strong>Impact Prioritization</strong></p>
<ul>
<li>High impact: Tests and documentation (immediate maintenance burden)</li>
<li>Medium impact: API surface and code structure</li>
<li>Low impact: Minor optimizations and cleanup</li>
</ul>
</li>
</ol>
<h3 id="phase-2-micro-ticket-creation-15-30-minutes">Phase 2: Micro-Ticket Creation (15-30 minutes)<a hidden class="anchor" aria-hidden="true" href="#phase-2-micro-ticket-creation-15-30-minutes">#</a></h3>
<p>Break work into focused 5-15 minute tasks:</p>
<ul>
<li><strong>Analysis tickets</strong>: Understand current state</li>
<li><strong>Consolidation tickets</strong>: Merge similar components</li>
<li><strong>Elimination tickets</strong>: Remove unnecessary complexity</li>
<li><strong>Verification tickets</strong>: Ensure nothing broke</li>
</ul>
<h3 id="phase-3-systematic-execution-variable">Phase 3: Systematic Execution (Variable)<a hidden class="anchor" aria-hidden="true" href="#phase-3-systematic-execution-variable">#</a></h3>
<p>Execute micro-tickets with discipline:</p>
<ul>
<li>Work on one ticket at a time</li>
<li>Test immediately after each change</li>
<li>Commit after each completed ticket</li>
<li>Document what was changed and why</li>
</ul>
<h3 id="phase-4-impact-measurement-15-minutes">Phase 4: Impact Measurement (15 minutes)<a hidden class="anchor" aria-hidden="true" href="#phase-4-impact-measurement-15-minutes">#</a></h3>
<p>Quantify the results:</p>
<ul>
<li>Lines of code eliminated</li>
<li>Files consolidated</li>
<li>Complexity metrics improved</li>
<li>Functionality preservation verified</li>
</ul>
<h2 id="success-patterns">Success Patterns<a hidden class="anchor" aria-hidden="true" href="#success-patterns">#</a></h2>
<h3 id="test-simplification">Test Simplification<a hidden class="anchor" aria-hidden="true" href="#test-simplification">#</a></h3>
<p><strong>Target</strong>: Over-engineered test scenarios</p>
<ul>
<li><strong>Consolidate</strong> similar test files</li>
<li><strong>Eliminate</strong> benchmark tests for edge cases</li>
<li><strong>Preserve</strong> core functionality and error handling tests</li>
<li><strong>Keep</strong> essential performance measurements</li>
</ul>
<p><strong>Example</strong>: konfig reduced 8 test files → 6 files (25% reduction), 1,075 → 843 lines (22% reduction)</p>
<h3 id="documentation-streamlining">Documentation Streamlining<a hidden class="anchor" aria-hidden="true" href="#documentation-streamlining">#</a></h3>
<p><strong>Target</strong>: Verbose, repetitive documentation</p>
<ul>
<li><strong>Consolidate</strong> redundant examples</li>
<li><strong>Eliminate</strong> over-detailed explanations</li>
<li><strong>Preserve</strong> essential usage patterns</li>
<li><strong>Keep</strong> clear API reference</li>
</ul>
<p><strong>Example</strong>: konfig reduced documentation by 31% while improving clarity</p>
<h3 id="api-surface-optimization">API Surface Optimization<a hidden class="anchor" aria-hidden="true" href="#api-surface-optimization">#</a></h3>
<p><strong>Target</strong>: Unnecessary convenience functions</p>
<ul>
<li><strong>Evaluate</strong> each public function&rsquo;s value proposition</li>
<li><strong>Eliminate</strong> thin wrappers that provide no semantic benefit</li>
<li><strong>Preserve</strong> functions that offer API consistency</li>
<li><strong>Keep</strong> extensibility hooks for future development</li>
</ul>
<p><strong>Example</strong>: konfig kept wrapper functions after analysis showed they provide API consistency</p>
<h2 id="risk-mitigation">Risk Mitigation<a hidden class="anchor" aria-hidden="true" href="#risk-mitigation">#</a></h2>
<h3 id="git-workflow">Git Workflow<a hidden class="anchor" aria-hidden="true" href="#git-workflow">#</a></h3>
<ul>
<li>Create feature branch for simplification work</li>
<li>Commit after each micro-ticket completion</li>
<li>Use descriptive commit messages explaining what was simplified</li>
<li>Easy rollback if any issues arise</li>
</ul>
<h3 id="testing-strategy">Testing Strategy<a hidden class="anchor" aria-hidden="true" href="#testing-strategy">#</a></h3>
<ul>
<li>Run full test suite after each major change</li>
<li>Verify examples and documentation still work</li>
<li>Check that all functionality is preserved</li>
<li>Measure performance to ensure no regressions</li>
</ul>
<h3 id="quality-checkpoints">Quality Checkpoints<a hidden class="anchor" aria-hidden="true" href="#quality-checkpoints">#</a></h3>
<ul>
<li>After each phase, verify the system still works completely</li>
<li>Measure complexity reduction achieved so far</li>
<li>Confirm that simplification goals are being met</li>
<li>Adjust approach based on what&rsquo;s learned</li>
</ul>
<h2 id="measuring-success">Measuring Success<a hidden class="anchor" aria-hidden="true" href="#measuring-success">#</a></h2>
<h3 id="quantitative-metrics">Quantitative Metrics<a hidden class="anchor" aria-hidden="true" href="#quantitative-metrics">#</a></h3>
<ul>
<li><strong>Lines eliminated</strong>: Code, documentation, tests</li>
<li><strong>Files consolidated</strong>: Reduced file count</li>
<li><strong>Complexity reduction</strong>: Cyclomatic complexity, cognitive load</li>
<li><strong>Performance maintained</strong>: Benchmarks unchanged or improved</li>
</ul>
<h3 id="qualitative-improvements">Qualitative Improvements<a hidden class="anchor" aria-hidden="true" href="#qualitative-improvements">#</a></h3>
<ul>
<li><strong>Developer experience</strong>: Faster onboarding, clearer codebase</li>
<li><strong>Maintenance burden</strong>: Less code to break, easier updates</li>
<li><strong>Cognitive load</strong>: Simpler mental models, obvious purposes</li>
<li><strong>Long-term sustainability</strong>: More focused, maintainable architecture</li>
</ul>
<h2 id="when-not-to-apply">When NOT to Apply<a hidden class="anchor" aria-hidden="true" href="#when-not-to-apply">#</a></h2>
<p><strong>Don&rsquo;t use merciless simplification if:</strong></p>
<ul>
<li>Codebase is already minimal and focused</li>
<li>Team lacks experience with systematic refactoring</li>
<li>No comprehensive test coverage exists</li>
<li>Time pressure prevents careful, methodical approach</li>
<li>Codebase is about to undergo major architectural changes</li>
</ul>
<h2 id="expected-results">Expected Results<a hidden class="anchor" aria-hidden="true" href="#expected-results">#</a></h2>
<p><strong>Typical outcomes from systematic application:</strong></p>
<ul>
<li><strong>20-40% complexity reduction</strong> across tests and documentation</li>
<li><strong>100% functionality preservation</strong> through disciplined approach</li>
<li><strong>Improved developer experience</strong> with cleaner, more focused codebase</li>
<li><strong>Reduced maintenance burden</strong> with fewer moving parts to manage</li>
<li><strong>Better performance</strong> through elimination of unnecessary overhead</li>
</ul>
<h2 id="case-study-konfig-library">Case Study: konfig Library<a hidden class="anchor" aria-hidden="true" href="#case-study-konfig-library">#</a></h2>
<p>Applied to the konfig Go configuration library with these results:</p>
<ul>
<li><strong>Test files</strong>: 8 → 6 files (25% reduction)</li>
<li><strong>Test lines</strong>: 1,075 → 843 lines (22% reduction)</li>
<li><strong>Benchmark complexity</strong>: 65% reduction</li>
<li><strong>Documentation</strong>: 31% reduction</li>
<li><strong>Functionality</strong>: 100% preserved</li>
<li><strong>Developer experience</strong>: Significantly improved</li>
</ul>
<p><strong>Key insight</strong>: Even well-designed libraries benefit from systematic simplification.</p>
<h2 id="getting-started">Getting Started<a hidden class="anchor" aria-hidden="true" href="#getting-started">#</a></h2>
<ol>
<li><strong>Choose a project</strong> with moderate complexity (not too simple, not overwhelmingly complex)</li>
<li><strong>Set aside 2-4 hours</strong> for systematic application</li>
<li><strong>Create a feature branch</strong> for all simplification work</li>
<li><strong>Start with Phase 1</strong> analysis to understand current state</li>
<li><strong>Apply the filter mercilessly</strong> - question everything</li>
<li><strong>Work in micro-tickets</strong> to maintain focus and minimize risk</li>
<li><strong>Measure and document results</strong> to validate the approach</li>
</ol>
<p>The methodology is proven, systematic, and safe. The results speak for themselves.</p>
<p><strong>Ready to simplify your codebase? Start with the analysis phase and prepare to be amazed by what you can eliminate without losing any value.</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Merciless Simplification</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
